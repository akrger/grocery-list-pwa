{% extends "base.html" %}
{% load i18n %}
{% block content %}
<div class="mdc-snackbar mdc-snackbar"
     aria-live="assertive"
     aria-atomic="true"
     aria-hidden="true">
	<div class="mdc-snackbar__text"></div>
	<div class="mdc-snackbar__action-wrapper">
	    <button type="button" class="mdc-button mdc-snackbar__action-button"></button>
	</div>
    </div>
    <nav class="mdc-list">
	{% for list in lists %}
	<a href="{% url 'show_list' list.id %}" class="mdc-list-item" data-mdc-auto-init="MDCRipple">
	    {{ list.title }}
	</a>
	{% endfor %}
    </nav>
    <div class="fab wrapper">
	<button class="mdc-fab material-icons mdc-fab--mini" aria-label="Add new Grocery List" data-mdc-auto-init="MDCRipple" onclick="window.location.href='{% url 'new_list' %}'">
	    <span class="mdc-fab__icon">
		add
	    </span>
	</button>
    </div>
    <script>
     if ('serviceWorker' in navigator) {
	 navigator.serviceWorker.register('serviceworker.js').then(function(registration) {
	     // Registration was successful

	     var newWorker = registration.installing;

	     // statechange fires every time the ServiceWorker.state changes
	     newWorker.onstatechange = function() {
		 // show the message on activation
		 if (newWorker.state == 'activated' && !navigator.serviceWorker.controller) {
 		     const MDCSnackbar = mdc.snackbar.MDCSnackbar;
 		     const snackbar = new MDCSnackbar(document.querySelector('.mdc-snackbar'));
 		     const dataObj = {
 			 message: "{% trans 'This website now works offline' %}",
 			 actionText: '{% trans "Dismiss" %}',
 			 actionHandler: function () {
 			     console.log('my cool function');
 			 }
 		     };
 		     snackbar.show(dataObj);
		 }
	     };
	 }).catch(function(err) {
	     // registration failed :(
	 });
     }
    </script>
    {% endblock %}
